<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Convert wide panels to long format — long_panel • panelr</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Convert wide panels to long format — long_panel"><meta property="og:description" content="This function takes wide format panels as input and
converts them to long format."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">panelr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.7.6</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../index.html">
    <span class="fa fa-home"></span>
     
  </a>
</li>
<li>
  <a href="../articles/wbm.html">
    <span class="fa fa-book"></span>
     
    Package Introduction
  </a>
</li>
<li>
  <a href="../articles/reshape.html">
    <span class="fa fa-arrows"></span>
     
    Reshaping Tutorial
  </a>
</li>
<li>
  <a href="../reference/index.html">
    <span class="fa fa-file-code-o"></span>
     
    Documentation
  </a>
</li>
<li>
  <a href="../news/index.html">
    <span class="fa fa-newspaper-o"></span>
     
    News
  </a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/jacob-long/panelr" class="external-link">
    <span class="fa fa-github fa-lg"></span>
     
    Github
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Convert wide panels to long format</h1>
    <small class="dont-index">Source: <a href="https://github.com/jacob-long/panelr/blob/HEAD/R/reshapers.R" class="external-link"><code>R/reshapers.R</code></a></small>
    <div class="hidden name"><code>long_panel.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>This function takes wide format panels as input and
converts them to long format.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">long_panel</span><span class="op">(</span></span>
<span>  <span class="va">data</span>,</span>
<span>  prefix <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  suffix <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  begin <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  end <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  id <span class="op">=</span> <span class="st">"id"</span>,</span>
<span>  wave <span class="op">=</span> <span class="st">"wave"</span>,</span>
<span>  periods <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  label_location <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"end"</span>, <span class="st">"beginning"</span><span class="op">)</span>,</span>
<span>  as_panel_data <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  match <span class="op">=</span> <span class="st">".*"</span>,</span>
<span>  use.regex <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  check.varying <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>data</dt>
<dd><p>The wide data frame.</p></dd>


<dt>prefix</dt>
<dd><p>What character(s) go before the period indicator? If none,
set this argument to NULL.</p></dd>


<dt>suffix</dt>
<dd><p>What character(s) go after the period indicator? If none,
set this argument to NULL.</p></dd>


<dt>begin</dt>
<dd><p>What is the label for the first period? Could be <code>1</code>, <code>"A"</code>,
or anything that can be sequenced.</p></dd>


<dt>end</dt>
<dd><p>What is the label for the final period? Could be <code>2</code>, <code>"B"</code>,
or anything that can be sequenced and lies further along the sequence
than the <code>begin</code> argument.</p></dd>


<dt>id</dt>
<dd><p>The name of the ID variable as a string. If there is no ID
variable, then this will be the name of the newly-created ID variable.</p></dd>


<dt>wave</dt>
<dd><p>This will be the name of the newly-created wave variable.</p></dd>


<dt>periods</dt>
<dd><p>If you period indicator does not lie in a sequence or is
not understood by the function, then you can supply them as a vector
instead. For instance, you could give <code>c("one","three","five")</code> if
your variables are labeled <code>var_one</code>, <code>var_three</code>, and <code>var_five</code>.</p></dd>


<dt>label_location</dt>
<dd><p>Where does the period label go on the variable?
If the variables are labeled like <code>var_1</code>, <code>var_2</code>, etc., then it is
<code>"end"</code>. If the labels are more like <code>A_var</code>, <code>B_var</code>, and so on, then
it is <code>"beginning"</code>.</p></dd>


<dt>as_panel_data</dt>
<dd><p>Should the return object be a <code><a href="panel_data.html">panel_data()</a></code> object?
Default is TRUE.</p></dd>


<dt>match</dt>
<dd><p>The regex that will match the part of the variable names other
than the wave indicator. By default it will match any character any
amount of times. Sometimes you might know that the variable names should
start with a digit, for instance, and you might use <code>"\\d.*"</code> instead.</p></dd>


<dt>use.regex</dt>
<dd><p>Should the <code>begin</code> and <code>end</code> arguments be treated as
regular expressions? Default is FALSE.</p></dd>


<dt>check.varying</dt>
<dd><p>Should the function check to make sure that every
variable in the wide data with a wave indicator is actually time-varying?
Default is TRUE, meaning that a constant like "race_W1" only measured in
wave 1 will be defined in each wave in the long data. With very large
datasets, however, sometimes setting this to FALSE can save memory.</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>Either a <code>data.frame</code> or <code>panel_data</code> frame.</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    <p>There is no easy way to convert panel data from wide to long format because
the both formats are basically non-standard for other applications.
This function can handle the common case in which the wide data frame
has a regular labeling system for each period. The key thing is
providing enough information for the function to understand the pattern.</p>
<p>In the end, this function calls <code><a href="https://rdrr.io/r/stats/reshape.html" class="external-link">stats::reshape()</a></code> but should be easier
to use and able to handle more situations, such as when the label occurs
at the beginning of the variable name. Also, just as important, this
function has built-in utilities to handle unbalanced data --- when
variables occur more than once but every single period, which breaks
<code><a href="https://rdrr.io/r/stats/reshape.html" class="external-link">stats::reshape()</a></code>.</p>
    </div>
    <div id="see-also">
    <h2>See also</h2>
    <div class="dont-index"><p><code><a href="widen_panel.html">widen_panel()</a></code></p></div>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## We need a wide data frame, so we will make one from the long-format </span></span></span>
<span class="r-in"><span><span class="co">## data included in the package.</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Convert WageData to panel_data object</span></span></span>
<span class="r-in"><span><span class="va">wages</span> <span class="op">&lt;-</span> <span class="fu"><a href="panel_data.html">panel_data</a></span><span class="op">(</span><span class="va">WageData</span>, id <span class="op">=</span> <span class="va">id</span>, wave <span class="op">=</span> <span class="va">t</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># Convert wages to wide format</span></span></span>
<span class="r-in"><span><span class="va">wide_wages</span> <span class="op">&lt;-</span> <span class="fu"><a href="widen_panel.html">widen_panel</a></span><span class="op">(</span><span class="va">wages</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Note: wide_wages has variables in the following format:</span></span></span>
<span class="r-in"><span><span class="co"># var1_1, var1_2, var1_3, var2_1, var2_2, var2_3, etc.</span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span><span class="va">long_wages</span> <span class="op">&lt;-</span> <span class="fu">long_panel</span><span class="op">(</span><span class="va">wide_wages</span>, prefix <span class="op">=</span> <span class="st">"_"</span>, begin <span class="op">=</span> <span class="fl">1</span>, end <span class="op">=</span> <span class="fl">7</span>,</span></span>
<span class="r-in"><span>                         id <span class="op">=</span> <span class="st">"id"</span>, label_location <span class="op">=</span> <span class="st">"end"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span><span class="co"># Note that in this case, the prefix and label_location arguments are</span></span></span>
<span class="r-in"><span><span class="co"># the defaults but are included just for clarity.</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Jacob A. Long.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer></div>

  


  

  </body></html>

