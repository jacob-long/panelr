<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Regression Models and Utilities for Repeated Measures and Panel Data • panelr</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="bootstrap-toc.css">
<script src="bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Regression Models and Utilities for Repeated Measures and Panel Data">
<meta property="og:description" content='Provides an object type and associated tools for storing and 
  wrangling panel data. Implements several methods for creating regression
  models that take advantage of the unique aspects of 
  panel data. Among other capabilities, automates the "within-between" 
  (also known as "between-within" and "hybrid") panel regression specification
  that combines the desirable aspects of both fixed effects and random effects 
  econometric models and fits them as multilevel models 
  (Allison, 2009 &lt;doi:10.4135/9781412993869.d33&gt;; 
  Bell &amp; Jones, 2015 &lt;doi:10.1017/psrm.2014.7&gt;). These models can also be 
  estimated via generalized estimating equations 
  (GEE; McNeish, 2019 &lt;doi:10.1080/00273171.2019.1602504&gt;) and Bayesian 
  estimation is (optionally) supported via Stan. 
  Supports estimation of asymmetric effects models via first differences
  (Allison, 2019 &lt;doi:10.1177/2378023119826441&gt;) as well as a generalized
  linear model extension thereof using GEE. '>
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-home">
      <header><div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">panelr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.7.7</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fa fa-home"></span>
     
  </a>
</li>
<li>
  <a href="articles/wbm.html">
    <span class="fa fa-book"></span>
     
    Package Introduction
  </a>
</li>
<li>
  <a href="articles/reshape.html">
    <span class="fa fa-arrows"></span>
     
    Reshaping Tutorial
  </a>
</li>
<li>
  <a href="reference/index.html">
    <span class="fa fa-file-code-o"></span>
     
    Documentation
  </a>
</li>
<li>
  <a href="news/index.html">
    <span class="fa fa-newspaper-o"></span>
     
    News
  </a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/jacob-long/panelr" class="external-link">
    <span class="fa fa-github fa-lg"></span>
     
    Github
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">


<div class="section level1">
<div class="page-header"><h1 id="panelr">panelr<a class="anchor" aria-label="anchor" href="#panelr"></a>
</h1></div>
<p>This is an R package designed to aid in the analysis of panel data, designs in which the same group of respondents/entities are contacted/measured multiple times. <code>panelr</code> provides some useful infrastructure, like a <code>panel_data</code> object class, as well as automating some emerging methods for analyses of these data.</p>
<p><code><a href="reference/wbm.html">wbm()</a></code> automates the “within-between” (also known as “between-within” and “hybrid”) specification that combines the desirable aspects of both fixed effects and random effects econometric models and fits them using the <code>lme4</code> package in the backend. Bayesian estimation of these models is supported by interfacing with the <code>brms</code> package (<code><a href="reference/wbm_stan.html">wbm_stan()</a></code>) and GEE estimation via <code>geepack</code> (<code><a href="reference/wbgee.html">wbgee()</a></code>).</p>
<p>It also automates the fairly new “asymmetric effects” specification described by <a href="https://journals.sagepub.com/doi/10.1177/2378023119826441" class="external-link">Allison (2019)</a> and supports estimation via GLS for linear asymmetric effects models (<code><a href="reference/asym.html">asym()</a></code>) and via GEE for non-Gaussian models (<code><a href="reference/asym_gee.html">asym_gee()</a></code>).</p>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p><code>panelr</code> is now available via CRAN.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"panelr"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="usage">Usage<a class="anchor" aria-label="anchor" href="#usage"></a>
</h2>
<div class="section level3">
<h3 id="panel_data-frames">
<code>panel_data</code> frames<a class="anchor" aria-label="anchor" href="#panel_data-frames"></a>
</h3>
<p>While not strictly required, the best way to start is to declare your data as panel data. I’ll load the example data <code>WageData</code> to demonstrate.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://panelr.jacob-long.com" class="external-link">panelr</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"WageData"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">colnames</a></span><span class="op">(</span><span class="va">WageData</span><span class="op">)</span></span></code></pre></div>
<pre><code> [1] "exp"   "wks"   "occ"   "ind"   "south" "smsa"  "ms"    "fem"  
 [9] "union" "ed"    "blk"   "lwage" "t"     "id"   </code></pre>
<p>The two key variables here are <code>t</code> and <code>id</code>. <code>t</code> is the wave of the survey the row of the data refers to while <code>id</code> is the survey respondent. This is a perfectly balanced data set, so there are 7 observations for each of the 595 respondents. We will use those two pieces of information to create a <code>panel_data</code> object.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">wages</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/panel_data.html">panel_data</a></span><span class="op">(</span><span class="va">WageData</span>, id <span class="op">=</span> <span class="va">id</span>, wave <span class="op">=</span> <span class="va">t</span><span class="op">)</span></span>
<span><span class="va">wages</span></span></code></pre></div>
<div class="sourceCode" id="cb5"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Panel data:    4,165 x 14</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="co"># entities:      id [595]</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="co"># wave variable: t [1, 2, 3, ... (7 waves)]</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>   id        t   exp   wks   occ   ind south  smsa    ms   fem union    ed</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>   <span class="sc">&lt;</span>fct<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a> <span class="dv">1</span> <span class="dv">1</span>         <span class="dv">1</span>     <span class="dv">3</span>    <span class="dv">32</span>     <span class="dv">0</span>     <span class="dv">0</span>     <span class="dv">1</span>     <span class="dv">0</span>     <span class="dv">1</span>     <span class="dv">0</span>     <span class="dv">0</span>     <span class="dv">9</span></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a> <span class="dv">2</span> <span class="dv">1</span>         <span class="dv">2</span>     <span class="dv">4</span>    <span class="dv">43</span>     <span class="dv">0</span>     <span class="dv">0</span>     <span class="dv">1</span>     <span class="dv">0</span>     <span class="dv">1</span>     <span class="dv">0</span>     <span class="dv">0</span>     <span class="dv">9</span></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a> <span class="dv">3</span> <span class="dv">1</span>         <span class="dv">3</span>     <span class="dv">5</span>    <span class="dv">40</span>     <span class="dv">0</span>     <span class="dv">0</span>     <span class="dv">1</span>     <span class="dv">0</span>     <span class="dv">1</span>     <span class="dv">0</span>     <span class="dv">0</span>     <span class="dv">9</span></span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a> <span class="dv">4</span> <span class="dv">1</span>         <span class="dv">4</span>     <span class="dv">6</span>    <span class="dv">39</span>     <span class="dv">0</span>     <span class="dv">0</span>     <span class="dv">1</span>     <span class="dv">0</span>     <span class="dv">1</span>     <span class="dv">0</span>     <span class="dv">0</span>     <span class="dv">9</span></span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a> <span class="dv">5</span> <span class="dv">1</span>         <span class="dv">5</span>     <span class="dv">7</span>    <span class="dv">42</span>     <span class="dv">0</span>     <span class="dv">1</span>     <span class="dv">1</span>     <span class="dv">0</span>     <span class="dv">1</span>     <span class="dv">0</span>     <span class="dv">0</span>     <span class="dv">9</span></span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a> <span class="dv">6</span> <span class="dv">1</span>         <span class="dv">6</span>     <span class="dv">8</span>    <span class="dv">35</span>     <span class="dv">0</span>     <span class="dv">1</span>     <span class="dv">1</span>     <span class="dv">0</span>     <span class="dv">1</span>     <span class="dv">0</span>     <span class="dv">0</span>     <span class="dv">9</span></span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a> <span class="dv">7</span> <span class="dv">1</span>         <span class="dv">7</span>     <span class="dv">9</span>    <span class="dv">32</span>     <span class="dv">0</span>     <span class="dv">1</span>     <span class="dv">1</span>     <span class="dv">0</span>     <span class="dv">1</span>     <span class="dv">0</span>     <span class="dv">0</span>     <span class="dv">9</span></span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a> <span class="dv">8</span> <span class="dv">2</span>         <span class="dv">1</span>    <span class="dv">30</span>    <span class="dv">34</span>     <span class="dv">1</span>     <span class="dv">0</span>     <span class="dv">0</span>     <span class="dv">0</span>     <span class="dv">1</span>     <span class="dv">0</span>     <span class="dv">0</span>    <span class="dv">11</span></span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a> <span class="dv">9</span> <span class="dv">2</span>         <span class="dv">2</span>    <span class="dv">31</span>    <span class="dv">27</span>     <span class="dv">1</span>     <span class="dv">0</span>     <span class="dv">0</span>     <span class="dv">0</span>     <span class="dv">1</span>     <span class="dv">0</span>     <span class="dv">0</span>    <span class="dv">11</span></span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a><span class="dv">10</span> <span class="dv">2</span>         <span class="dv">3</span>    <span class="dv">32</span>    <span class="dv">33</span>     <span class="dv">1</span>     <span class="dv">1</span>     <span class="dv">0</span>     <span class="dv">0</span>     <span class="dv">1</span>     <span class="dv">0</span>     <span class="dv">1</span>    <span class="dv">11</span></span>
<span id="cb5-16"><a href="#cb5-16" aria-hidden="true" tabindex="-1"></a><span class="co"># ... with 4,155 more rows, and 2 more variables: blk &lt;dbl&gt;, lwage &lt;dbl&gt;</span></span></code></pre></div>
<p>We have to tell <code><a href="reference/panel_data.html">panel_data()</a></code> which column refers to the unique identifiers for respondents/entities (the latter when you have something like countries or companies instead of people) and which column refers to the period/wave of data collection.</p>
<p>Note that the resulting <code>panel_data</code> object will remember which of the columns is the ID column and which is the wave column. It will also fight you a bit when you do things that might have the side effect of dropping those columns or putting them out of time order. <code>panel_data</code> frames are modified tibbles (<a href="https://tibble.tidyverse.org/" class="external-link"><code>tibble</code> package</a>) that are grouped by entity (i.e., the ID column).</p>
<p><code>panel_data</code> frames are meant to play nice with the <a href="https://www.tidyverse.org/" class="external-link"><code>tidyverse</code></a>. Here’s a quick sample of how a tidy workflow with <code>panelr</code> can work:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"WageData"</span><span class="op">)</span></span>
<span><span class="co"># Create `panel_data` object</span></span>
<span><span class="va">wages</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/panel_data.html">panel_data</a></span><span class="op">(</span><span class="va">WageData</span>, id <span class="op">=</span> <span class="va">id</span>, wave <span class="op">=</span> <span class="va">t</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="co"># Pass to mutate, which will calculate statistics groupwise when appropriate</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span></span>
<span>    wage <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">exp</a></span><span class="op">(</span><span class="va">lwage</span><span class="op">)</span>, <span class="co"># reverse transform the log wage variable</span></span>
<span>    mean_wage_individual <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">wage</span><span class="op">)</span>, <span class="co"># means calculated separately by entity</span></span>
<span>    lag_wage <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/lead-lag.html" class="external-link">lag</a></span><span class="op">(</span><span class="va">wage</span><span class="op">)</span> <span class="co"># mutate() will calculate lagged values correctly</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="co"># Use `panelr`'s complete_data() to filter for entities that have</span></span>
<span>  <span class="co"># enough observations</span></span>
<span>  <span class="fu"><a href="reference/complete_data.html">complete_data</a></span><span class="op">(</span><span class="va">wage</span>, <span class="va">union</span>, min.waves <span class="op">=</span> <span class="fl">5</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="co"># drop if there aren't 5 completions</span></span>
<span>  <span class="co"># You can use unpanel() if you need to do rowwise or columnwise operations</span></span>
<span>  <span class="fu"><a href="reference/unpanel.html">unpanel</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span></span>
<span>    mean_wage_grand <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">wage</span><span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="co"># You'll need to convert back to panel_data if you want to keep using panelr functions</span></span>
<span>  <span class="fu"><a href="reference/panel_data.html">panel_data</a></span><span class="op">(</span>id <span class="op">=</span> <span class="va">id</span>, wave <span class="op">=</span> <span class="va">t</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="wbm--the-within-between-model">
<code>wbm()</code> — the within-between model<a class="anchor" aria-label="anchor" href="#wbm--the-within-between-model"></a>
</h3>
<p>Anyone can fit a within-between model without the use of this package as it is just a particular specification of a multilevel model. With that said, it’s something that will require some programming and could be rather prone to error. In the best case, it is cumbersome and inefficient to create the necessary variables.</p>
<p><code><a href="reference/wbm.html">wbm()</a></code> is the primary model-fitting function that you’ll use from this package and it fits within-between models for you, utilizing <a href="https://cran.r-project.org/package=lme4" class="external-link"><code>lme4</code></a> as a backend for estimation.</p>
<p>A three-part model syntax is used that goes like this:</p>
<p><code>dv ~ varying_variables | invariant_variables | cross_level_interactions/random effects</code></p>
<p>It works like a typical formula otherwise. The bars just tell <code>panelr</code> how to treat the variables. Note also that you can specify random slopes using <code>lme4</code>-style syntax in the third part of the formula as well. A random intercept for the ID variable is included by default and doesn’t need to be specified in the formula.</p>
<p>Lagged variables are supported as well through the <code><a href="https://dplyr.tidyverse.org/reference/lead-lag.html" class="external-link">lag()</a></code> function. Unlike base R, <code>panelr</code> lags the variables correctly — wave 1 observations will have NA values for the lagged variable rather than taking the final wave value of the previous entity.</p>
<p>Here we will specify a model using the <code>wages</code> data. We will predict logged wages (<code>lwage</code>) using two time-varying variables — lagged union membership (<code>union</code>) and contemporaneous weeks worked (<code>wks</code>) — along with a time-invariant predictor, a binary indicator for black race (<code>blk</code>). For demonstrative purposes, we’ll fit a random slope for <code>lag(union)</code> and a cross-level interaction between <code>blk</code> and <code>wks</code>.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">model</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/wbm.html">wbm</a></span><span class="op">(</span><span class="va">lwage</span> <span class="op">~</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/lead-lag.html" class="external-link">lag</a></span><span class="op">(</span><span class="va">union</span><span class="op">)</span> <span class="op">+</span> <span class="va">wks</span> <span class="op">|</span> <span class="va">blk</span> <span class="op">|</span> <span class="va">blk</span> <span class="op">*</span> <span class="va">wks</span> <span class="op">+</span> <span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/lead-lag.html" class="external-link">lag</a></span><span class="op">(</span><span class="va">union</span><span class="op">)</span> <span class="op">|</span> <span class="va">id</span><span class="op">)</span>, data <span class="op">=</span> <span class="va">wages</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">model</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb8"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>MODEL INFO<span class="sc">:</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>Entities<span class="sc">:</span> <span class="dv">595</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>Time periods<span class="sc">:</span> <span class="dv">2-7</span></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>Dependent variable<span class="sc">:</span> lwage</span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>Model type<span class="sc">:</span> Linear mixed effects</span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>Specification<span class="sc">:</span> within<span class="sc">-</span>between</span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a>MODEL FIT<span class="sc">:</span></span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a>AIC <span class="ot">=</span> <span class="fl">1427.04</span>, BIC <span class="ot">=</span> <span class="fl">1495.03</span></span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a>Pseudo<span class="sc">-</span>R² (fixed effects) <span class="ot">=</span> <span class="fl">0.05</span></span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a>Pseudo<span class="sc">-</span>R² (total) <span class="ot">=</span> <span class="fl">0.75</span></span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a>Entity ICC <span class="ot">=</span> <span class="fl">0.73</span></span>
<span id="cb8-13"><a href="#cb8-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-14"><a href="#cb8-14" aria-hidden="true" tabindex="-1"></a>WITHIN EFFECTS<span class="sc">:</span></span>
<span id="cb8-15"><a href="#cb8-15" aria-hidden="true" tabindex="-1"></a><span class="sc">---------------------------------------------------------</span></span>
<span id="cb8-16"><a href="#cb8-16" aria-hidden="true" tabindex="-1"></a>                    Est.   S.E.   t val.      d.f.      p</span>
<span id="cb8-17"><a href="#cb8-17" aria-hidden="true" tabindex="-1"></a><span class="sc">----------------</span> <span class="sc">-------</span> <span class="sc">------</span> <span class="sc">--------</span> <span class="sc">---------</span> <span class="sc">------</span></span>
<span id="cb8-18"><a href="#cb8-18" aria-hidden="true" tabindex="-1"></a><span class="fu">lag</span>(union)          <span class="fl">0.04</span>   <span class="fl">0.04</span>     <span class="fl">1.24</span>     <span class="fl">88.17</span>   <span class="fl">0.22</span></span>
<span id="cb8-19"><a href="#cb8-19" aria-hidden="true" tabindex="-1"></a>wks                <span class="sc">-</span><span class="fl">0.00</span>   <span class="fl">0.00</span>    <span class="sc">-</span><span class="fl">1.51</span>   <span class="fl">2948.04</span>   <span class="fl">0.13</span></span>
<span id="cb8-20"><a href="#cb8-20" aria-hidden="true" tabindex="-1"></a><span class="sc">---------------------------------------------------------</span></span>
<span id="cb8-21"><a href="#cb8-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-22"><a href="#cb8-22" aria-hidden="true" tabindex="-1"></a>BETWEEN EFFECTS<span class="sc">:</span></span>
<span id="cb8-23"><a href="#cb8-23" aria-hidden="true" tabindex="-1"></a><span class="sc">---------------------------------------------------------------</span></span>
<span id="cb8-24"><a href="#cb8-24" aria-hidden="true" tabindex="-1"></a>                           Est.   S.E.   t val.     d.f.      p</span>
<span id="cb8-25"><a href="#cb8-25" aria-hidden="true" tabindex="-1"></a><span class="sc">-----------------------</span> <span class="sc">-------</span> <span class="sc">------</span> <span class="sc">--------</span> <span class="sc">--------</span> <span class="sc">------</span></span>
<span id="cb8-26"><a href="#cb8-26" aria-hidden="true" tabindex="-1"></a>(Intercept)                <span class="fl">6.20</span>   <span class="fl">0.24</span>    <span class="fl">25.89</span>   <span class="fl">571.97</span>   <span class="fl">0.00</span></span>
<span id="cb8-27"><a href="#cb8-27" aria-hidden="true" tabindex="-1"></a><span class="fu">imean</span>(<span class="fu">lag</span>(union))          <span class="fl">0.03</span>   <span class="fl">0.04</span>     <span class="fl">0.72</span>   <span class="fl">593.27</span>   <span class="fl">0.47</span></span>
<span id="cb8-28"><a href="#cb8-28" aria-hidden="true" tabindex="-1"></a><span class="fu">imean</span>(wks)                 <span class="fl">0.01</span>   <span class="fl">0.01</span>     <span class="fl">2.30</span>   <span class="fl">571.29</span>   <span class="fl">0.02</span></span>
<span id="cb8-29"><a href="#cb8-29" aria-hidden="true" tabindex="-1"></a>blk                       <span class="sc">-</span><span class="fl">0.35</span>   <span class="fl">0.06</span>    <span class="sc">-</span><span class="fl">5.65</span>   <span class="fl">591.87</span>   <span class="fl">0.00</span></span>
<span id="cb8-30"><a href="#cb8-30" aria-hidden="true" tabindex="-1"></a><span class="sc">---------------------------------------------------------------</span></span>
<span id="cb8-31"><a href="#cb8-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-32"><a href="#cb8-32" aria-hidden="true" tabindex="-1"></a>CROSS<span class="sc">-</span>LEVEL INTERACTIONS<span class="sc">:</span></span>
<span id="cb8-33"><a href="#cb8-33" aria-hidden="true" tabindex="-1"></a><span class="sc">------------------------------------------------------</span></span>
<span id="cb8-34"><a href="#cb8-34" aria-hidden="true" tabindex="-1"></a>                 Est.   S.E.   t val.      d.f.      p</span>
<span id="cb8-35"><a href="#cb8-35" aria-hidden="true" tabindex="-1"></a><span class="sc">-------------</span> <span class="sc">-------</span> <span class="sc">------</span> <span class="sc">--------</span> <span class="sc">---------</span> <span class="sc">------</span></span>
<span id="cb8-36"><a href="#cb8-36" aria-hidden="true" tabindex="-1"></a>wks<span class="sc">:</span>blk         <span class="sc">-</span><span class="fl">0.00</span>   <span class="fl">0.00</span>    <span class="sc">-</span><span class="fl">1.06</span>   <span class="fl">2956.56</span>   <span class="fl">0.29</span></span>
<span id="cb8-37"><a href="#cb8-37" aria-hidden="true" tabindex="-1"></a><span class="sc">------------------------------------------------------</span></span>
<span id="cb8-38"><a href="#cb8-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-39"><a href="#cb8-39" aria-hidden="true" tabindex="-1"></a>p values calculated using Satterthwaite d.f.</span>
<span id="cb8-40"><a href="#cb8-40" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb8-41"><a href="#cb8-41" aria-hidden="true" tabindex="-1"></a>RANDOM EFFECTS<span class="sc">:</span></span>
<span id="cb8-42"><a href="#cb8-42" aria-hidden="true" tabindex="-1"></a><span class="sc">-------------------------------------</span></span>
<span id="cb8-43"><a href="#cb8-43" aria-hidden="true" tabindex="-1"></a>  Group      Parameter     Std. Dev. </span>
<span id="cb8-44"><a href="#cb8-44" aria-hidden="true" tabindex="-1"></a><span class="sc">----------</span> <span class="sc">--------------</span> <span class="sc">-----------</span></span>
<span id="cb8-45"><a href="#cb8-45" aria-hidden="true" tabindex="-1"></a>    <span class="fu">id</span>      (Intercept)     <span class="fl">0.3785</span>   </span>
<span id="cb8-46"><a href="#cb8-46" aria-hidden="true" tabindex="-1"></a>    id       <span class="fu">lag</span>(union)      <span class="fl">0.24</span>    </span>
<span id="cb8-47"><a href="#cb8-47" aria-hidden="true" tabindex="-1"></a> Residual                   <span class="fl">0.2291</span>   </span>
<span id="cb8-48"><a href="#cb8-48" aria-hidden="true" tabindex="-1"></a><span class="sc">-------------------------------------</span></span></code></pre></div>
<p>Note that <code>imean()</code> is an internal function that calculates the individual-level mean, which represents the between-subjects effects of the time-varying predictors. The within effects are the time-varying predictors at the occasion level with the individual-level mean subtracted. If you want the model specified such that the occasion level predictors do not have the mean subtracted, use the <code>model = "contextual"</code> argument. The “contextual” label refers to the way these terms are normally interpreted when it is specified that way.</p>
<p>You may also use <code>model = "between"</code> to fit what econometricians call the random effects model, which does not disaggregate the within- and between-entity variation.</p>
</div>
<div class="section level3">
<h3 id="widen_panel-and-long_panel">
<code>widen_panel()</code> and <code>long_panel()</code>
<a class="anchor" aria-label="anchor" href="#widen_panel-and-long_panel"></a>
</h3>
<p>Two functions that should cover your bases for the tricky business of <strong>reshaping</strong> panel data are included. Sometimes, like for doing SEM-based analyses, you need your data in wide format — i.e., one row per entity. <code><a href="reference/widen_panel.html">widen_panel()</a></code> makes that easy and should require minimal trial and error or thinking.</p>
<p>Perhaps more often, your raw data are already in wide format and you need to get it into long format to do cool stuff like use <code><a href="reference/wbm.html">wbm()</a></code>. That can be very tricky, but <code><a href="reference/long_panel.html">long_panel()</a></code> (I didn’t think <code>lengthen_panel()</code> or <code>longen_panel()</code> quite worked as names) should cover most situations. You tell it what the labels for periods are (e.g., does it range from <code>1</code> to <code>5</code>, <code>"A"</code> to <code>"E"</code>, or something else?), where they are located (before or after the variable’s name?), and what kinds of formatting go before/after it. Check out the vignette for more details and some worked examples.</p>
</div>
</div>
<div class="section level2">
<h2 id="contributing">Contributing<a class="anchor" aria-label="anchor" href="#contributing"></a>
</h2>
<p>I’m happy to receive bug reports, suggestions, questions, and (most of all) contributions to fix problems and add features. I prefer you use the Github issues system over trying to reach out to me in other ways. Pull requests for contributions are encouraged.</p>
<p>Please note that this project is released with a <a href="https://github.com/jacob-long/panelr/blob/master/CONDUCT.md" class="external-link">Contributor Code of Conduct</a>. By participating in this project you agree to abide by its terms.</p>
</div>
<div class="section level2">
<h2 id="license">License<a class="anchor" aria-label="anchor" href="#license"></a>
</h2>
<p>The source code of this package is licensed under the <a href="https://opensource.org/licenses/mit-license.php" class="external-link">MIT License</a>.</p>
</div>
</div>

  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://cloud.r-project.org/package=panelr" class="external-link">View on CRAN</a></li>
<li><a href="https://github.com/jacob-long/panelr/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/jacob-long/panelr" class="external-link">Report a bug</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li>
<a href="https://opensource.org/licenses/mit-license.php" class="external-link">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a>
</li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing panelr</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Jacob A. Long <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0002-1582-6214" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://cran.r-project.org/package=panelr" class="external-link"><img src="https://www.r-pkg.org/badges/version-ago/panelr" alt="CRAN_Status_Badge"></a></li>
<li><a href="https://cran.r-project.org/package=panelr" class="external-link"><img src="https://cranlogs.r-pkg.org/badges/grand-total/panelr" alt="Total Downloads"></a></li>
<li><a href="https://travis-ci.org/jacob-long/panelr" class="external-link"><img src="https://travis-ci.org/jacob-long/panelr.svg?branch=master" alt="Travis-CI Build Status"></a></li>
<li><a href="https://ci.appveyor.com/project/jacob-long/panelr" class="external-link"><img src="https://ci.appveyor.com/api/projects/status/github/jacob-long/panelr?branch=master&amp;svg=true" alt="AppVeyor Build Status"></a></li>
<li><a href="https://codecov.io/github/jacob-long/panelr?branch=master" class="external-link"><img src="https://img.shields.io/codecov/c/github/jacob-long/panelr/master.svg" alt="Coverage Status"></a></li>
</ul>
</div>

  </div>
</div>


      <footer><div class="copyright">
  <p></p>
<p>Developed by Jacob A. Long.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
